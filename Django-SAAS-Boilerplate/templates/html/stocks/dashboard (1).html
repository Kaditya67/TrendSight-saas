<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Market Dashboard</title>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.1/css/jquery.dataTables.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
    <style>
        table.table {
            width: 100%;
            border-collapse: collapse;
        }
    
        table.table th, table.table td {
            padding: 8px;
            text-align: center;
        }
    
        table.table th {
            background-color: #f2f2f2 !important; /* Override Bootstrap's styles */
        }
    
        table.table .positive {
            background-color: lightgreen !important; /* Ensure positive styles apply */
        }
    
        table.table .negative {
            background-color: lightcoral !important; /* Ensure negative styles apply */
        }
    
        /* Optional: Ensure borders are consistent */
        table.table, table.table th, table.table td {
            border: 1px solid #211e1e !important;
        }
    </style>
</head>
<body>
    <div class="container my-4">
        <!-- Header Section -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1>Stock Market Dashboard</h1>
            <a href="login.html" class="btn btn-primary">Logout</a>
        </div>

             <!-- EMA Trend Analysis -->
             <div class="row mb-4">
                <h5> Nifty 50 Trends </h5>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body text-center">
                            <h5 class="card-title">Short-Term Trend (10 EMA)</h5>
                            <p class="card-text">Above (Days: +3)</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body text-center">
                            <h5 class="card-title">Medium-Term Trend (20 EMA)</h5>
                            <p class="card-text">Below (Days: -2)</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body text-center">
                            <h5 class="card-title">Long-Term Trend (30 EMA)</h5>
                            <p class="card-text">Above (Days: +5)</p>
                        </div>
                    </div>
                </div>
            </div>

        <!-- Broader Market Trend Table -->
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">Broader Market Trends - Daily </h5>
                <table id="broaderMarketTable" class="table table-bordered text-center">
                    <thead>
                        <tr>
                            <th>Index</th>
                            <th>10 EMA</th>
                            <th>20 EMA</th>
                            <th>30 EMA</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Nifty 50</td>
                            <td class="positive">+3</td>
                            <td class="negative">-2</td>
                            <td class="positive">+5</td>
                        </tr>
                        <tr>
                            <td>Nifty 500</td>
                            <td class="negative">-1</td>
                            <td class="positive">+2</td>
                            <td class="positive">+4</td>
                        </tr>
                        <tr>
                            <td>Nifty Small Cap</td>
                            <td class="positive">+6</td>
                            <td class="negative">-3</td>
                            <td class="positive">+7</td>
                        </tr>
                        <tr>
                            <td>Nifty Mid Cap</td>
                            <td class="positive">+6</td>
                            <td class="negative">-3</td>
                            <td class="positive">+7</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Insights</h5>
                    <p class="card-text"> Nifty 50 is bulish on short term but still berish in long term stay cautions, 
                        Small Caps are bulish on all the time frames, Mid Caps are also bulish on all the time frames.
                        Nifty 500 is bearish on short term but bullish on medium and long term.
                         </p>
                    

                </div>
            </div>

        </div>

        <!-- Sectoral Indices Table -->
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">Sectoral Indices - Daily</h5>
                <table id="sectoralMarketTable" class="table table-bordered text-center">
                    <thead>
                        <tr>
                            <th>Sector</th>
                            <th>10 EMA</th>
                            <th>20 EMA</th>
                            <th>30 EMA</th>
                            <th> Outperforming ? </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Nifty IT</td>
                            <td class="positive">+4</td>
                            <td class="negative">-2</td>
                            <td class="positive">+6</td>
                            <td class="positive">Yes</td>
                        </tr>
                        <tr>
                            <td>Nifty Bank</td>
                            <td class="negative">-3</td>
                            <td class="positive">+1</td>
                            <td class="positive">+5</td>
                            <td class="negative">No</td>
                        </tr>
                        <tr>
                            <td>Nifty FMCG</td>
                            <td class="positive">+7</td>
                            <td class="positive">+3</td>
                            <td class="negative">-1</td>
                            <td class="positive">Yes</td>
                        </tr>
                        <tr>
                            <td>Nifty Auto</td>
                            <td class="positive">+7</td>
                            <td class="positive">+3</td>
                            <td class="negative">-1</td>
                            <td class="positive">Yes</td>
                        </tr>
                        <tr>
                            <td>Nifty Banks</td>
                            <td class="positive">+7</td>
                            <td class="positive">+3</td>
                            <td class="negative">-1</td>
                            <td class="negative">No</td>
                        </tr>
                        <tr>
                            <td>Nifty PSE</td>
                            <td class="positive">+7</td>
                            <td class="positive">+3</td>
                            <td class="negative">-1</td>
                            <td class="positive">Yes</td>
                        </tr>
                        <tr>
                            <td>Nifty PSU Banks</td>
                            <td class="positive">+7</td>
                            <td class="positive">+3</td>
                            <td class="negative">-1</td>
                            <td class="positive">Yes</td>
                        </tr>
                        <tr>
                            <td>Nifty OIL & GAS</td>
                            <td class="positive">+7</td>
                            <td class="positive">+3</td>
                            <td class="negative">-1</td>
                            <td class="positive">Yes</td>
                        </tr>
                        <tr>
                            <td>Nifty Media</td>
                            <td class="positive">+7</td>
                            <td class="positive">+3</td>
                            <td class="negative">-1</td>
                            <td class="positive">Yes</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Sectoral Indices Bar Graph -->
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">Sectoral EMA Performance</h5>
                <canvas id="sectorBarChart" style="height: 400px;"></canvas>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        $(document).ready(function () {
            $('#broaderMarketTable').DataTable({
                paging: false,        // Disable pagination
                ordering: true,       // Enable sorting
                info: false           // Disable table info
            });
        });
    </script>

    <script>
        $(document).ready(function () {
            $('#sectoralMarketTable').DataTable({
                paging: false,        // Disable pagination
                ordering: true,       // Enable sorting
                info: false           // Disable table info
            });
        });
    </script>

    <script>
        // Data for the bar chart
        const sectorLabels = [
            "Banks", "Auto", "Commodities", "Consumption", 
            "Energy", "Finance", "FMCG", 
            "IT", "Media", "Metal", "Pharma","PSE", "Realty", "Services","CPSE","Infra","Private Bank","Public Bank", "PSU Bank"
        ];
        const performanceCounts = [2,-4,5,6,23,-5,-30,6,3,4,5,-5,3,-7,32,10,22,32,-21]; // Replace with actual sector performance values

        // Bar chart configuration
        const ctx = document.getElementById('sectorBarChart').getContext('2d');
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: sectorLabels,
                datasets: [
                    {
                        label: 'EMA Performance',
                        data: performanceCounts,
                        backgroundColor: performanceCounts.map(value => value >= 0 ? 'rgba(75, 192, 192, 0.7)' : 'rgba(255, 99, 132, 0.7)'),
                        borderColor: performanceCounts.map(value => value >= 0 ? 'rgba(75, 192, 192, 1)' : 'rgba(255, 99, 132, 1)'),
                        borderWidth: 1
                    }
                ]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Sectors'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Performance Count'
                        },
                        beginAtZero: true
                    }
                }
            }
        });
    </script>
</body>
</html>