<!-- Tailwind Utilities for Resizable Images and Videos -->
<style>
    .ql-editor img, .ql-editor video {
        @apply max-w-full cursor-pointer;
    }
    .ql-editor img[style*="resize"] {
        @apply resize-both overflow-auto;
    }
</style>

<script src="https://cdn.tailwindcss.com"></script>

{% extends 'blog/base.html' %}

{% block content %}
<body class="bg-gray-100">
    <div class="max-w-4xl mx-auto mt-10">
        <!-- Blog Header -->
        <div class="text-center mb-10">
            <h1 class="text-4xl font-bold text-gray-800">Create Your Blog</h1>
            <p class="text-gray-600 mt-2">Share your thoughts and stories with the world</p>
        </div>

        <!-- Blog Form Container -->
        <div class="bg-white p-8 rounded-lg shadow-md">
            <!-- Success or Error Message -->
            {% if blog %}
                <div class="p-4 mb-4 bg-green-200 text-green-800 rounded">
                    <p>Blog titled "{{ blog.title }}" has been successfully created.</p>
                </div>
            {% elif error %}
                <div class="p-4 mb-4 bg-red-200 text-red-800 rounded">
                    <p>{{ error }}</p>
                </div>
            {% endif %}
            
            <!-- Modify form to include file uploads -->
            <form method="POST" action="{% url 'blog:text_blogs' %}" class="space-y-6" enctype="multipart/form-data">
                {% csrf_token %}
                
                <!-- Blog Title -->
                <div>
                    <label for="title" class="block text-lg font-semibold text-gray-700">Blog Title</label>
                    <input type="text" name="title" id="title" class="w-full mt-2 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                </div>

                <!-- Published By & Date -->
                <div class="grid grid-cols-2 gap-4">
                    <!-- Published By -->
                    <div>
                        <label for="author" class="block text-lg font-semibold text-gray-700">Published By</label>
                        <input type="text" name="author" id="author" class="w-full mt-2 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    
                    <!-- Date -->
                    <div>
                        <label for="published_date" class="block text-lg font-semibold text-gray-700">Date</label>
                        <input type="date" name="published_date" id="published_date" class="w-full mt-2 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                </div>

                <!-- Blog Content -->
                <div>
                    <label for="content" class="block text-lg font-semibold text-gray-700">Blog Content</label>
                    <textarea name="content" id="content" class="w-full mt-2 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 h-64" required></textarea>
                </div>

                <!-- File Uploads for Images and Videos -->

                <div>
                    <label for="document" class="block text-lg font-semibold text-gray-700">Upload Document (Word, Excel, PPT)</label>
                    <input type="file" name="document" id="document" class="w-full mt-2 px-4 py-2 border border-gray-300 rounded-lg">
                </div>

                <!-- Buttons -->
                <div class="flex justify-between items-center mt-6">
                    <a href="{% url 'blog:view_blogs' %}" class="px-6 py-3 bg-gray-600 text-white rounded-lg shadow-md hover:bg-gray-700 transition duration-300">
                        View Blogs
                    </a>
                    <button type="submit" class="px-6 py-3 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 transition duration-300">
                        Publish Blog
                    </button>
                </div>
            </form>
        </div>
    </div>


    <!-- Set the current date in the date field automatically -->
    <script>
        // Set the current date in the date field automatically
        document.getElementById('published_date').valueAsDate = new Date();
    </script>
</body>
{%endblock%}
